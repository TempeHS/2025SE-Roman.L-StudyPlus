{% extends 'layout.html' %}
{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        </form>
        <ul class="list-group">
            {% for todo in todos %}
            <li class="list-group-item">
                <div class="d-flex align-items-center mb-1">
                    <form method="POST" action="{{ url_for('complete_todo', todo_id=todo.id) }}"
                        style="display:inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                        <button
                            class="btn btn-sm {% if todo.completed %}btn-success{% else %}btn-outline-secondary{% endif %} me-2"
                            type="submit">
                            {% if todo.completed %}✔{% else %}❑{% endif %}
                        </button>
                    </form>
                    <span class="flex-grow-1 {% if todo.completed %}text-decoration-line-through text-muted{% endif %}">
                        <strong>{{ todo.title }}</strong>
                    </span>
                    <form method="POST" action="{{ url_for('delete_todo', todo_id=todo.id) }}" style="display:inline;">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                        <button class="btn btn-sm btn-danger ms-2" type="submit">Delete</button>
                    </form>
                </div>
                <div class="small text-secondary mb-1">Due: {{ todo.due_date }}</div>
                <div class="small text-dark mb-1">Notes: {{ todo.body }}</div>
                {% if todo.label %}
                <div class="small text-dark mb-1">Labels: {{ todo.label }}</div>
                {% endif %}
            </li>
            {% else %}
            <li class="list-group-item text-muted">No to-dos yet!</li>
            {% endfor %}
        </ul>
    </div>
</div>
</div>
<script src="{{ url_for('static', filename='js/dashboard.js') }}" nonce="{{ nonce }}"></script>
{% endblock %}